/* --- page.module.css (ครบ: จำกัดจำนวนแถว + ซ่อนสกรอลล์ + แก้เส้นซ้อน
      + ปุ่มเลือกสีเดิม + ฟอร์มเรียงตรง + ปุ่มยกเลิก/เพิ่ม ชิดขวา
      + ชื่อสินค้า ellipsis) --- */
:root{
  --primary:#008dda;
  --primary-600:#1685bb;
  --primary-500:#41c9e2;
  --thead-bg:#eef9fc;
  --border:#e5e7eb;

  /* ขนาดฝั่งซ้าย + จำนวนแถว */
  --sider-w: 400px;
  --left-rows: 12;

  /* คำนวณความสูงแถว/หัวตาราง */
  --row-vpad: 18px;
  --thead-vpad: 16px;
  --row-h: calc(var(--row-vpad)*2 + 20px);
  --thead-h: calc(var(--thead-vpad)*2 + 24px);

  /* ความกว้างคอลัมน์ปุ่ม “เลือก” */
  --left-action-col: 120px;
}

/* --- Layout --- */
.pageContainer{
  display:flex; justify-content:center; align-items:flex-start;
  min-height:100vh; background:#fff;
  font-family:'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
}
.mainCard{ background:#fff; border-radius:0; box-shadow:none; padding:0; width:100vw; max-width:100%; height:100%; }

/* Page bar */
.pageBar{ display:flex; align-items:center; justify-content:space-between; padding:16px 20px; border-bottom:1px solid #e0e0e0; background:#fff; }
.titleGroup{ display:flex; align-items:baseline; gap:12px; flex-wrap:wrap; }
.pageTitle{ margin:0; font-weight:700; font-size:clamp(1.4rem,2.2vw,1.8rem); color:var(--primary); }
.pageSubtitle{ font-size:.95rem; color:#64748b; }

/* Main */
.contentWrapper{ display:flex; flex-direction:row; height:calc(100vh - 68px); }
.sider{ flex:0 0 var(--sider-w); padding:24px; background:#fff; border-right:1px solid #e0e0e0; display:flex; flex-direction:column; min-height:0; }
.mainContent{ flex:1; padding:24px; overflow-y:auto; display:flex; flex-direction:column; }

/* Search */
.searchSection{ margin-bottom:24px; position:relative; }
.searchBoxContainer{ display:flex; align-items:center; position:relative; }
.searchIconPrefix{ position:absolute; left:16px; color:#9e9e9e; pointer-events:none; }
.searchField{
  flex:1; padding:14px 16px 14px 48px;
  border:1px solid #c5d4e1; border-radius:10px; font-size:1rem;
  transition:border-color .3s, box-shadow .3s;
}
.searchField:focus{
  outline:none; border-color:var(--primary-600);
  box-shadow:0 0 0 4px color-mix(in srgb, var(--primary) 25%, transparent);
}
.scanButton{
  background:transparent; color:#1a237e; border:none; padding:0 16px; cursor:pointer;
  transition:color .3s; position:absolute; right:0; top:50%; transform:translateY(-50%);
}
.scanButton:hover{ color:#1e88e5; }

.searchResults{
  position:absolute; top:calc(100% + 8px); left:0; right:0; background:#fff;
  border:1px solid #e0e0e0; border-radius:10px; z-index:10;
  box-shadow:0 6px 16px rgba(0,0,0,.1); max-height:250px; overflow-y:auto;
}
.searchItem{ padding:14px 16px; cursor:pointer; border-bottom:1px solid #f0f4f8; transition:background-color .2s; }
.searchItem:hover{ background:#e2e8f0; }

/* --- Tables --- */
.tableSection{ flex:1; display:flex; flex-direction:column; min-height:0; }
.tableHeader{
  font-size:1.25rem; font-weight:600; color:#333; margin-bottom:16px;
  display:flex; align-items:center; gap:12px; border-left:4px solid var(--primary); padding-left:12px;
}
.headerIcon{ color:var(--primary); }

/* Wrapper */
.tableWrapper{
  border:1px solid var(--border);
  border-radius:10px;
  flex:1;
  overflow:hidden; /* ไม่มีสกรอลล์โดยค่าเริ่มต้น */
}

/* Table */
.itemTable{ width:100%; border-collapse:separate; border-spacing:0; table-layout:fixed; }

/* Sticky thead */
.itemTable thead{ background:var(--thead-bg); }
.itemTable thead th{
  position:sticky; top:0; z-index:2;
  background:var(--thead-bg);
  padding:var(--thead-vpad) 16px;
  border-bottom:0 !important;
  box-shadow: inset 0 -1px 0 var(--border);
  white-space:nowrap;
  background-clip: padding-box;
}
.itemTable thead th:first-child{ border-top-left-radius:10px; }
.itemTable thead th:last-child{  border-top-right-radius:10px; }

/* Cells */
.itemTable th, .itemTable td{ padding:var(--row-vpad) 16px !important; vertical-align:middle; }
.itemTable tbody td{ border-top:1px solid var(--border); }

/* ปกติให้ wrap ได้ */
.itemTable tbody td{ white-space:normal !important; overflow-wrap:anywhere; word-break:break-word; }

/* ====== ซ้าย: “รายการสินค้าทั้งหมด” จำกัดแถว + ซ่อนสกรอลล์ ====== */
.sider .tableWrapper{
  max-height: calc(var(--thead-h) + var(--row-h) * var(--left-rows));
  overflow: auto;
  -ms-overflow-style: none;
  scrollbar-width: none;
  overflow-x: auto;
}
.sider .tableWrapper::-webkit-scrollbar{ width:0; height:0; }

/* คอลัมน์กว้าง/แคบ เพื่อให้เห็นชื่อได้มากขึ้น */
.colActions{ width: var(--left-action-col) !important; }
.colBarcode{ width: 22% !important; }  /* เดิม 26% → เหลือ 22% */
.colName{ width: auto !important; }

/* ชื่อสินค้า → ตัดด้วย … ให้เห็นง่าย */
.itemTable tbody td:first-child,
.itemTable td.itemName,
.itemName{
  white-space:nowrap !important;
  overflow:hidden;
  text-overflow:ellipsis;
}

/* (เลือกใช้ได้) ชื่อสินค้า 2 บรรทัด + …  */
/* เพิ่ม class "nameClamp2" ให้ element ข้างในเซลล์ถ้าต้องการ */
.nameClamp2{
  display:-webkit-box;
  -webkit-line-clamp:2;
  -webkit-box-orient:vertical;
  overflow:hidden;
  white-space:normal !important;
}

/* Barcode/ปุ่มเป็นบรรทัดเดียว */
.sider .itemTable tbody td:nth-child(2),
.sider .itemTable tbody td:nth-child(3){
  white-space:nowrap !important;
  overflow:hidden;
  text-overflow:ellipsis;
}

/* ลด padding คอลัมน์ปุ่ม และชิดขวา */
.sider .itemTable thead th:nth-child(3),
.sider .itemTable tbody td:nth-child(3){
  padding-left:8px !important;
  padding-right:8px !important;
  text-align:right;
}

/* ====== ขวา: “รายการที่รอการบันทึก” แสดง 2 แถว + ซ่อนสกรอลล์ ====== */
.detailsFormSection + .tableSection .tableWrapper{
  max-height: calc(var(--thead-h) + var(--row-h) * 2);
  overflow: auto;
  -ms-overflow-style: none;
  scrollbar-width: none;
  margin-bottom:16px;
}
.detailsFormSection + .tableSection .tableWrapper::-webkit-scrollbar{ width:0; height:0; }

/* คอลัมน์ที่ควร 1 บรรทัด */
.detailsFormSection + .tableSection .itemTable tbody td:nth-child(2),
.detailsFormSection + .tableSection .itemTable tbody td:nth-child(3),
.detailsFormSection + .tableSection .itemTable tbody td:nth-child(4),
.detailsFormSection + .tableSection .itemTable tbody td:nth-child(5),
.detailsFormSection + .tableSection .itemTable tbody td:nth-child(6){
  white-space:nowrap !important;
  overflow:hidden;
  text-overflow:ellipsis;
}

/* Hover & last row border */
.itemTable tbody tr:hover{ background:#f9f9f9; }
.itemTable tbody tr:last-child td{ border-bottom:0; }

/* styling เพิ่มเติม */
.itemName{ font-weight:500; color:var(--primary); }
.textRight{ text-align:right; }
.emptyMessage{ text-align:center; color:#757575; padding:24px; }

/* ปุ่ม “เลือก” สีเดิม */
.selectItemButton{
  background:#2563eb; border:1px solid #2563eb; color:#fff;
  height:40px; min-width:88px; padding:0 14px; border-radius:8px; font-size:.95rem; font-weight:600;
  display:inline-flex; align-items:center; justify-content:center;
  transition:background-color .2s, border-color .2s, transform .05s;
}
.selectItemButton:hover{ background:#1d4ed8; border-color:#1d4ed8; }
.selectItemButton:active{ background:#1e40af; border-color:#1e40af; transform:translateY(.5px); }
.selectItemButton:focus-visible{ outline:3px solid rgba(37,99,235,.35); outline-offset:2px; }
.selectItemButton[disabled]{ background:#dbeafe; border-color:#bfdbfe; color:#94a3b8; cursor:not-allowed; }

/* ปุ่มลบ */
.deleteButton{ background:#ef5350; color:#fff; border:none; padding:8px; border-radius:4px; cursor:pointer; transition:background-color .3s; }
.deleteButton:hover{ background:#e53935; }

/* Pagination (ถ้ามีส่วนอื่นใช้) */
.paginationControls{ display:flex; list-style:none; padding:10px; margin:12px 0 0; gap:6px; justify-content:center; align-items:center; background:#fff; }
.pageButton{ background:#fff; border:1px solid #e0e0e0; border-radius:8px; padding:6px 10px; min-width:34px; cursor:pointer; }
.pageButton:hover:not(:disabled){ background:#eef6ff; border-color:#cfe3ff; }
.pageButton:disabled{ opacity:.5; cursor:not-allowed; }
.activePage{ background:var(--primary); border-color:var(--primary); color:#fff; }
.ellipsis{ color:#9aa0a6; }

/* ===== ฟอร์ม (จัดคอลัมน์ให้ตรง + กันล้น) ===== */
.detailsFormSection{ background:#f9f9f9; border:1px solid #e0e0e0; border-radius:10px; padding:24px; margin-bottom:24px; }
.detailsFormHeader{ font-size:1.5rem; font-weight:600; color:#1a237e; margin-bottom:24px; display:flex; align-items:center; gap:12px; border-left:4px solid #1a237e; padding-left:12px; }

/* ให้คอลัมน์หดได้จริง */
.inputGrid{
  display:grid;
  grid-template-columns: repeat(6, minmax(0, 1fr));
  column-gap:14px; row-gap:14px;
  align-items:start;
  margin-bottom:24px;
}
.formField{ display:flex; flex-direction:column; min-width:0; }
.formField label{
  font-weight:600; color:#333; margin-bottom:8px;
  line-height:1.2; min-height:38px;
  display:-webkit-box; -webkit-line-clamp:2; -webkit-box-orient:vertical; overflow:hidden;
}
.formField input, .formField select{
  height:44px; padding:10px 12px; width:100%;
  border:1px solid #e0e0e0; border-radius:8px; font-size:1rem; transition:border-color .3s;
}
.formField input[type="date"]{ min-height:44px; line-height:44px; padding:0 12px; width:100%; }
.formField textarea{
  padding:12px; border:1px solid #e0e0e0; border-radius:8px; font-size:1rem; transition:border-color .3s; width:100%;
}

/* disabled look */
.formField input:disabled, .formField select:disabled{ background:#f8fafc; color:#334155; opacity:1; }
.formField input[disabled][value]{ font-weight:600; color:#0f172a; }

/* Breakpoints ฟอร์ม */
@media (max-width:1400px){ .inputGrid{ grid-template-columns: repeat(5, minmax(0, 1fr)); } }
@media (max-width:1200px){ .inputGrid{ grid-template-columns: repeat(4, minmax(0, 1fr)); } }
@media (max-width:1024px){ .inputGrid{ grid-template-columns: repeat(3, minmax(0, 1fr)); } }
@media (max-width:768px) { .inputGrid{ grid-template-columns: repeat(2, minmax(0, 1fr)); } }
@media (max-width:560px) { .inputGrid{ grid-template-columns: 1fr; } }

/* ปุ่ม “ยกเลิก / เพิ่มลงรายการ” — ชิดขวา */
.detailsFormSection .formActions{
  display:flex; justify-content:flex-end; align-items:center;
  gap:12px; margin-top:16px;
}
.detailsFormSection .formActions .icon{ width:18px; height:18px; margin-right:8px; }
.detailsFormSection .clearButton{
  background:#f1f5f9; color:#0f172a; border:1px solid #cbd5e1;
  height:44px; padding:0 16px; border-radius:10px; font-weight:700; font-size:.95rem;
  display:inline-flex; align-items:center; justify-content:center;
  box-shadow:0 1px 0 rgba(0,0,0,.03);
  transition:background-color .2s, border-color .2s, transform .05s, box-shadow .2s;
}
.detailsFormSection .clearButton:hover{ background:#e2e8f0; border-color:#94a3b8; }
.detailsFormSection .clearButton:active{ transform:translateY(1px); }
.detailsFormSection .clearButton:focus-visible{ outline:3px solid rgba(148,163,184,.45); outline-offset:2px; }
.detailsFormSection .addItemButton{
  background:#22c55e; border:1px solid #16a34a; color:#fff;
  height:44px; padding:0 16px; border-radius:10px; font-weight:700; font-size:.95rem;
  display:inline-flex; align-items:center; justify-content:center;
  box-shadow:0 1px 0 rgba(0,0,0,.03);
  transition:background-color .2s, border-color .2s, transform .05s, box-shadow .2s;
}
.detailsFormSection .addItemButton:hover{ background:#16a34a; border-color:#15803d; }
.detailsFormSection .addItemButton:active{ background:#15803d; transform:translateY(1px); }
.detailsFormSection .addItemButton:focus-visible{ outline:3px solid rgba(34,197,94,.35); outline-offset:2px; }
.detailsFormSection .addItemButton:disabled{
  background:#e5e7eb; border-color:#e5e7eb; color:#9ca3af; cursor:not-allowed; box-shadow:none;
}

/* Save area */
.actionButtonsSection{ margin-top:16px; padding-top:16px; border-top:1px solid var(--border); position:static; z-index:0; }
.saveButton{
  background:#2e7d32; color:#fff; border:none; padding:12px 24px; border-radius:8px; font-weight:700; font-size:1rem;
  cursor:pointer; display:flex; align-items:center; gap:8px; transition:background-color .3s;
}
.saveButton:hover:not(:disabled){ background:#1b5e20; }
.saveButton:disabled{ background:#bdbdbd; cursor:not-allowed; }

/* Modal */
.modalOverlay{ position:fixed; inset:0; background:rgba(0,0,0,.5); display:flex; justify-content:center; align-items:center; z-index:100; }
.modalContent{ background:#fff; padding:32px; border-radius:12px; width:100%; max-width:450px; text-align:center; box-shadow:0 8px 25px rgba(0,0,0,.2); }
.modalHeader{ font-size:1.5rem; font-weight:600; color:#1a237e; margin-bottom:16px; }
.modalNotes{ font-style:italic; color:#757575; margin-top:8px; }
.modalActions{ display:flex; justify-content:center; gap:16px; margin-top:24px; }
.cancelButton, .confirmButton{ padding:10px 24px; border:none; border-radius:8px; font-weight:600; cursor:pointer; transition:background-color .2s; }
.cancelButton{ background:#e0e0e0; color:#424242; }
.cancelButton:hover{ background:#bdbdbd; }
.confirmButton{ background:#2e7d32; color:#fff; }
.confirmButton:hover{ background:#1b5e20; }

/* Responsive */
@media (max-width:768px){
  .contentWrapper{ flex-direction:column; }
  .sider{ border-right:none; border-bottom:1px solid #e0e0e0; flex:none; width:100%; }
}
